Настройка Maven
========================

Конфигурация Maven производиться на 3 уровнях:

- Проект - наиболее статическая конфигурация происходит в pom.xml
- Установка (Installation) - это конфигурация, добавляемая один раз для установки Maven.
- Пользователь - это конфигурация, специфичная для конкретного пользователя.
  
Разделение довольно четкое - проект определяет информацию, которая применяется к проекту, независимо от того, кто его создает, в то время как другие оба определяют настройки для текущей среды.

**Примечание**: установка и пользовательская конфигурация не могут использоваться для добавления общей информации о проекте - например, настройки `<organization>` или `<distributionManagement>` для всей компании.

Для этого у вас должны быть проекты, унаследованные от родительского файла pom.xml в масштабах всей компании.

Вы можете указать свою пользовательскую конфигурацию в `$ {user.home}/.m2/settings.xml`. Доступна полная ссылка на файл конфигурации. В этом разделе будет показано, как выполнить некоторые общие настройки. Обратите внимание, что файл не требуется - будут использоваться значения по умолчанию, если он не найден.

Настройка локального репозитория
---------------------------------

Местоположение вашего локального репозитория может быть изменено в вашей пользовательской конфигурации. Значение по умолчанию - `${user.home}/.m2/repository/`.

```xml
<settings>
    ...
    <localRepository>/path/to/local/repo/</localRepository>
    ...
</settings>
```

Примечание. Путь к локальному репозиторию должен быть абсолютным.

Настройка прокси
-----------------

Конфигурацию прокси также можно указать в файле настроек.

Для получения дополнительной информации см. Руководство по использованию прокси.

Настройка параллельного разрешения артефактов
-----------------------------------------------

По умолчанию Maven 2.1.0+ загружает до 5 артефактов (из разных групп) одновременно. Чтобы изменить размер пула потоков, запустите Maven с помощью `-Dmaven.artifact.threads`. Например, чтобы загружать только отдельные артефакты за раз:

    mvn -Dmaven.artifact.threads=1 verify

Вы можете установить эту опцию навсегда, и в этом случае вы можете использовать переменную среды MAVEN_OPTS. Например:

    export MAVEN_OPTS=-Dmaven.artifact.threads=3

Настройки безопасности и развертывания
---------------------------------

Репозитории для развертывания определены в проекте в разделе `<distributionManagement>`. Однако вы не можете указать свое имя пользователя, пароль или другие параметры безопасности в этом проекте. По этой причине вы должны добавить определение сервера в свои настройки с идентификатором, который соответствует идентификатору репозитория развертывания в проекте.

Кроме того, для некоторых репозиториев может потребоваться авторизация для загрузки, поэтому соответствующие настройки можно указать в элементе сервера таким же образом.

Какие требуемые настройки будут зависеть от типа репозитория, в который вы развертываете. Начиная с первого выпуска, по умолчанию поддерживаются только развертывания SCP и развертывания файлов, поэтому требуется только следующая конфигурация SCP:

```xml
<settings>
    ...
    <servers>
    <server>
        <id>repo1</id>
        <username>repouser</username>
        <!-- other optional elements:
        <password>my_login_password</password>
        <privateKey>/path/to/identity</privateKey> (default is ~/.ssh/id_dsa)
        <passphrase>my_key_passphrase</passphrase>
        -->
    </server>
    ...
    </servers>
    ...
</settings>
```

Чтобы зашифровать пароли в этих разделах, см. Настройки шифрования.

Использование зеркал для репозиториев
-------------------------------------

Репозитории могут быть объявлены внутри проекта, а это означает, что если у вас есть собственные настраиваемые репозитории, те, кто делится вашим проектом, легко получают нужные настройки прямо из коробки. Однако вы можете захотеть использовать альтернативное зеркало для конкретного репозитория без изменения файлов проекта. Обратитесь к Руководству по настройке зеркала для получения дополнительной информации.

Профили
------------

Конфигурацию репозитория также можно поместить в профиль. У вас может быть несколько профилей, один из которых активен, чтобы вы могли легко переключаться между средами. Дополнительные сведения о профилях см. В разделе «Введение в профили сборки».

Дополнительная конфигурация
----------------------------------

Maven будет работать для большинства задач с приведенной выше конфигурацией, однако, если у вас есть какая-либо конфигурация среды вне отдельных проектов, вам нужно будет настроить параметры. Следующие разделы относятся к тому, что доступно.

### Настройки

В Maven есть файл настроек, расположенный в папке установки Maven и / или в домашнем каталоге пользователя, который настраивает особенности среды, такие как:

- HTTP proxy server
- repository manager location
- server authentication and passwords
- other configuration properties

Для получения информации об этом файле см. Справку по настройкам

### Безопасность

Начиная с Maven 2.1.0+, вы можете шифровать пароли в своем файле настроек, однако сначала вы должны настроить мастер-пароль. Дополнительные сведения о паролях сервера и мастер-пароле см. В Руководстве по шифрованию паролей.


### Цепочки инструментов

Начиная с Maven 2.0.9+, вы можете создать проект, используя определенную версию JDK, независимо от той, с которой работает Maven. Для получения дополнительной информации см. Руководство по использованию Toolchains.